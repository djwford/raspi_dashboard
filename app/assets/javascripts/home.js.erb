
// Readings graphs
// _______________
  
// daily reading


$(function () {
  $('#temperature_today').highcharts({
      chart: {
          type: 'areaspline',
          animation: Highcharts.svg,
          height: 400,
          width: 700
      },
      title: {
          text: 'Temperature Today'
      },
      xAxis: {
          type: 'datetime'
      },
      yAxis: {
        min: 30
      },

      series: [{
        name: "Temperature",
        pointInterval: 100,
        pointStart: <%= (Time.now.beginning_of_day.to_i) * 1000 %>,
        data: <%= JSON::parse(TempRecord.last.readings) %>
      }]
  });
});

function update_daily_temp(temp){
  var chart = $('#temperature_today').highcharts();
  chart.series[0].addPoint(temp, true, true);
  $("#temp_display").html(temp);
}

// monthly reading

$(function () {
  $('#temperature_month').highcharts({
      chart: {
          type: 'line',
          animation: Highcharts.svg,
          height: 400,
          width: 700
      },
      title: {
          text: 'Monthly Temperature'
      },
      xAxis: {
          type: 'datetime'
      },
      yAxis: {
      },

      series: [
      {
        name: "Highs",
        pointInterval: (86400 * 1000),
        pointStart: <%= (Time.now.beginning_of_month.to_i) * 1000 %>,
        data: <%= TempRecord.monthly_extremes[0] %>
      },
      {
        name: "Lows",
        pointInterval: (86400 * 1000),
        pointStart: <%= (Time.now.beginning_of_month.to_i) * 1000 %>,
        data: <%= TempRecord.monthly_extremes[1] %>        

    }]
  });
});

// all_time readings
$(function () {
  $('#temperature_average').highcharts({
      chart: {
          type: 'line',
          animation: Highcharts.svg,
          height: 400,
          width: 700
      },
      title: {
          text: 'Average Daily Temperature'
      },
      xAxis: {
          type: 'datetime'
      },
      yAxis: {
      },

      series: [
      {
        name: "Average Temps.",
        pointInterval: (86400 * 1000),
        pointStart: <%= TempRecord.first.created_at.to_i * 1000 %>,
        data: <%= TempRecord.all_time %>
      }]
  });
});

// hourly_forecast
$(function () {
  $('#hourly_forecast_temperature').highcharts({
      chart: {
          type: 'line',
          animation: Highcharts.svg,
          height: 400,
          width: 700
      },
      title: {
          text: 'Hourly Forecast'
      },
      xAxis: {
          type: 'datetime'
      },
      yAxis: {
      },

      series: [
      {
        name: "Temperature",
        pointInterval: (3600 * 1000),
        pointStart: <%= HourlyForecast.last.created_at.to_i * 1000 %>,
        data: <%= HourlyForecast.last.temperature %>
      },
 
      {
        name: "Wind Speed",
        pointInterval: (3600 * 1000),
        pointStart: <%= HourlyForecast.last.created_at.to_i * 1000 %>,
        data: <%= HourlyForecast.last.wind_speed %>
      }


      ]
  });
});
// hourly_forecast_other
$(function () {
  $('#hourly_forecast_other').highcharts({
      chart: {
          type: 'line',
          animation: Highcharts.svg,
          height: 400,
          width: 700
      },
      title: {
          text: 'Hourly Forecast Other Data'
      },
      xAxis: {
          type: 'datetime'
      },
      yAxis: {
      },

      series: [
      {
        name: "Precipitation Probability",
        pointInterval: (3600 * 1000),
        pointStart: <%= HourlyForecast.last.created_at.to_i * 1000 %>,
        data: <%= HourlyForecast.last.precip_probability %>
      },
      {
        name: "Humidity",
        pointInterval: (3600 * 1000),
        pointStart: <%= HourlyForecast.last.created_at.to_i * 1000 %>,
        data: <%= HourlyForecast.last.humidity %>
      },
      {
        name: "Cloud Cover",
        pointInterval: (3600 * 1000),
        pointStart: <%= HourlyForecast.last.created_at.to_i * 1000 %>,
        data: <%= HourlyForecast.last.cloud_cover %>
      }
      ]
  });
});

// gas bill graph
$(function () {
  $('#gas_usage').highcharts({
      chart: {
          type: 'column',
          animation: Highcharts.svg,
          height: 400,
          width: 700
      },
      xAxis: {
          type: 'datetime'
      },      
      title: {
          text: 'Gas Usage'
      },
      series: [
      {
        name: "Average Gas Cost per Day",
        pointInterval: (2419200000),
        <% bill_year = (UtilityBill.first.created_at).year %>
        pointStart: <%= (Time.local(bill_year,UtilityBill.first.month,1).to_i) * 1000 %>,        
        data: <%= UtilityBill.gas_usage %>
      }]
  });
});
// electric_usage
$(function () {
  $('#electric_usage').highcharts({
      chart: {
          type: 'column',
          animation: Highcharts.svg,
          height: 400,
          width: 700
      },
      xAxis: {
          type: 'datetime'
      },      
      title: {
          text: 'Gas Usage'
      },
      series: [
      {
        name: "Average Gas Cost per Day",
        pointInterval: (2419200000),
        <% bill_year = (UtilityBill.first.created_at).year %>
        pointStart: <%= (Time.local(bill_year,UtilityBill.first.month,1).to_i) * 1000 %>,        
        data: <%= UtilityBill.electric_usage %>
      }]
  });
});
// utility_prices
$(function () {
  $('#utility_prices').highcharts({
      chart: {
          type: 'line',
          animation: Highcharts.svg,
          height: 400,
          width: 700
      },
      xAxis: {
          type: 'datetime'
      },      
      title: {
          text: 'Utility Prices'
      },
      series: [
      {
        name: "Electricity Cost per KWh",
        pointInterval: (2419200000),
        <% bill_year = (UtilityBill.first.created_at).year %>
        pointStart: <%= (Time.local(bill_year,UtilityBill.first.month,1).to_i) * 1000 %>,        
        data: <%= UtilityBill.prices[0] %>
      },
      {
        name: "Gas Price per DecaTherm",
        pointInterval: (2419200000),
        <% bill_year = (UtilityBill.first.created_at).year %>
        pointStart: <%= (Time.local(bill_year,UtilityBill.first.month,1).to_i) * 1000 %>,        
        data: <%= UtilityBill.prices[1] %>
      }]
  });
});